{"version":3,"file":"flip-tile.js","sourceRoot":"","sources":["../../../src/components/flip-tile/flip-tile.tsx"],"names":[],"mappings":"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","sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { iconEye } from '@siemens/ix-icons/icons';\nimport {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Prop,\n  State,\n  Watch,\n} from '@stencil/core';\nimport { animate } from 'animejs';\nimport Animation from '../utils/animation';\nimport { createMutationObserver } from '../utils/mutation-observer';\nimport { FlipTileVariant } from './flip-tile.types';\nimport { hasSlottedElements } from '../utils/shadow-dom';\n\n@Component({\n  tag: 'ix-flip-tile',\n  styleUrl: 'flip-tile.scss',\n  shadow: true,\n})\nexport class FlipTile {\n  @Element() hostElement!: HTMLIxFlipTileElement;\n\n  /**\n   * Variation of the Flip\n   *\n   * @since 4.0.0\n   */\n  @Prop() variant: FlipTileVariant = 'filled';\n\n  /**\n   * Height interpreted as REM\n   */\n  @Prop() height: number | 'auto' = 15.125;\n\n  /**\n   * Width interpreted as REM\n   */\n  @Prop() width: number | 'auto' = 16;\n\n  /**\n   * Index of the currently visible content\n   * @since 3.0.0\n   */\n  @Prop() index = 0;\n\n  /**\n   * ARIA label for the eye icon button\n   * Will be set as aria-label on the nested HTML button element\n   *\n   * @since 3.2.0\n   */\n  @Prop() ariaLabelEyeIconButton?: string;\n\n  /**\n   * Event emitted when the index changes\n   * @since 3.0.0\n   */\n  @Event() toggle!: EventEmitter<number>;\n\n  @State() isFlipAnimationActive: boolean = false;\n\n  @State() hasFooterSlot = false;\n\n  private contentItems: Array<HTMLIxFlipTileContentElement> = [];\n  private observer?: MutationObserver;\n\n  @Watch('index')\n  watchIndex(newIndex: number, oldIndex: number) {\n    if (newIndex === oldIndex) {\n      return;\n    }\n\n    this.doFlipAnimation(newIndex);\n  }\n\n  componentDidLoad() {\n    this.observer = createMutationObserver(() => this.updateContentItems());\n    this.observer.observe(this.hostElement, {\n      childList: true,\n    });\n  }\n\n  componentWillLoad() {\n    this.updateContentItems();\n    this.updateContentVisibility(this.index);\n  }\n\n  disconnectedCallback() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  }\n\n  private handleFooterSlotChange(event: Event) {\n    const { target } = event;\n    const slot = target as HTMLSlotElement;\n    this.hasFooterSlot = hasSlottedElements(slot);\n  }\n\n  private updateContentItems() {\n    this.contentItems = Array.from(\n      this.hostElement.querySelectorAll('ix-flip-tile-content')\n    );\n  }\n\n  private updateContentVisibility(indexVisible: number) {\n    this.contentItems.forEach(\n      (content, index) => (content.contentVisible = index === indexVisible)\n    );\n  }\n\n  private toggleIndex() {\n    let newIndex;\n\n    const oldIndex = this.index;\n\n    if (this.index >= this.contentItems.length - 1) {\n      newIndex = 0;\n    } else {\n      newIndex = this.index + 1;\n    }\n\n    const { defaultPrevented } = this.toggle.emit(newIndex);\n\n    if (defaultPrevented) {\n      this.index = oldIndex;\n      return;\n    }\n\n    this.doFlipAnimation(newIndex);\n  }\n\n  private doFlipAnimation(index: number) {\n    if (this.isFlipAnimationActive) {\n      return;\n    }\n\n    this.isFlipAnimationActive = true;\n\n    animate(\n      this.hostElement.shadowRoot!.querySelector('.flip-tile-container')!,\n      {\n        keyframes: {\n          '0%': {\n            transform: 'rotateY(0)',\n          },\n          '50%': {\n            transform: 'rotateY(90deg)',\n          },\n          '51%': {\n            transform: 'rotateY(270deg)',\n          },\n          '100%': {\n            transform: 'rotateY(360deg)',\n          },\n        },\n        duration: Animation.defaultTime,\n        easing: 'ease-in-out',\n        onComplete: () => {\n          this.index = index;\n          this.updateContentVisibility(this.index);\n        },\n      }\n    );\n\n    setTimeout(() => {\n      this.isFlipAnimationActive = false;\n    }, 2 * Animation.defaultTime);\n  }\n\n  render() {\n    return (\n      <Host\n        class={{\n          [`flip-tile-variant-${this.variant}`]: true,\n        }}\n        style={{\n          height: `${this.height}${this.height === 'auto' ? '' : 'rem'}`,\n          'min-height': `${this.height}${this.height === 'auto' ? '' : 'rem'}`,\n          'max-height': `${this.height}${this.height === 'auto' ? '' : 'rem'}`,\n          width: `${this.width}${this.width === 'auto' ? '' : 'rem'}`,\n          'min-width': `${this.width}${this.width === 'auto' ? '' : 'rem'}`,\n          'max-width': `${this.width}${this.width === 'auto' ? '' : 'rem'}`,\n        }}\n      >\n        <div class=\"flip-tile-container\">\n          <div class=\"flip-tile-header\">\n            <div class=\"header-slot-container text-l-title\">\n              <slot name=\"header\"></slot>\n            </div>\n            <ix-icon-button\n              icon={iconEye}\n              variant=\"tertiary\"\n              onClick={() => this.toggleIndex()}\n              aria-label={this.ariaLabelEyeIconButton}\n            ></ix-icon-button>\n          </div>\n\n          <div class=\"content-container\">\n            <slot></slot>\n          </div>\n          <div\n            class={{\n              footer: true,\n              'show-footer': this.hasFooterSlot,\n            }}\n          >\n            <slot\n              name=\"footer\"\n              onSlotchange={(event) => this.handleFooterSlotChange(event)}\n            ></slot>\n          </div>\n        </div>\n      </Host>\n    );\n  }\n}\n"]}