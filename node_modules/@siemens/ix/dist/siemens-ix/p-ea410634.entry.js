import{r as t,c as i,h as e,F as s,H as a,g as o}from"./p-CtoreFVF.js";import{D as h}from"./p-bDicGJUN.js";import{m as r}from"./p-bcj7UEIC.js";import{n}from"./p-8HpPmDK_.js";const d=":host{display:inline-block;position:relative}:host *,:host *::after,:host *::before{box-sizing:border-box}:host ::-webkit-scrollbar-button{display:none}@-moz-document url-prefix(){:host *{scrollbar-color:var(--theme-scrollbar-thumb--background) var(--theme-scrollbar-track--background);scrollbar-width:thin}}:host{}:host ::-webkit-scrollbar{width:0.5rem;height:0.5rem}:host{}:host ::-webkit-scrollbar-track{border-radius:5px;background:var(--theme-scrollbar-track--background)}:host ::-webkit-scrollbar-track:hover{background:var(--theme-scrollbar-track--background--hover)}:host{}:host ::-webkit-scrollbar-thumb{border-radius:5px;background:var(--theme-scrollbar-thumb--background)}:host{}:host ::-webkit-scrollbar-thumb:hover{background:var(--theme-scrollbar-thumb--background--hover)}:host ::-webkit-scrollbar-corner{display:none}@media (max-width: 48em){:host .min-width{width:-moz-min-content;width:min-content}}@media (min-width: 48em){:host .border-right{border-right:var(--theme-x-weak-bdr-2)}}:host ix-button{width:100%}:host .max-height{max-height:-moz-max-content;max-height:max-content}:host .no-margin{margin:0;padding:0}:host .pull-right{float:right;padding:0 1rem 0.75rem 1rem}";const c=class{constructor(e){t(this,e);this.dateRangeChange=i(this,"dateRangeChange",7);this.disabled=false;this.format="yyyy/LL/dd";this.singleSelection=false;this.from="";this.to="";this.minDate="";this.maxDate="";this.dateRangeId="custom";this.variant="primary";this.loading=false;this.showWeekNumbers=false;this.customRangeDisabled=false;this.dateRangeOptions=[];this.weekStartIndex=0;this.i18nCustomItem="Custom...";this.i18nDone="Done";this.i18nNoRange="No range set";this.today=h.now().toISO();this.selectedDateRangeId="";this.triggerRef=r();this.datePickerTouched=false}onDateRangeIdChange(){this.onRangeListSelect(this.dateRangeId);this.updateCurrentDate();this.setDateRangeSelection(this.dateRangeId);if(!this.currentRangeValue){return}this.onDateSelect({from:this.currentRangeValue.from,to:this.currentRangeValue.to,id:this.currentRangeValue.id})}onDateRangeOptionsChange(){this.initialize();this.onDateRangeIdChange()}onDisabledChange(){if(this.disabled){this.closeDropdown()}}componentWillLoad(){this.initialize();this.setDateRangeSelection(this.dateRangeId)}async getDateRange(){return this.currentRangeValue||{id:"",from:"",to:""}}initialize(){const t=this.dateRangeId==="custom"||!this.dateRangeId&&!!this.from&&!!this.to;if(t&&!this.customRangeDisabled){this.selectedDateRangeId="custom";this.updateCurrentDate();return}const i=!t&&!this.from;if(!i){console.warn('"from" and "range-date-id" is provided this is an invalid combination. Using "custom".');this.selectedDateRangeId="custom";this.updateCurrentDate();return}}updateCurrentDate(){this.currentRangeValue={id:this.selectedDateRangeId,from:this.from,to:this.to}}onDateSelect(t,i=true){this.dateRangeChange.emit(t);if(i){this.closeDropdown()}this.datePickerTouched=false}onRangeListSelect(t){if(this.setDateRangeSelection(t)&&this.currentRangeValue){this.onDateSelect(this.currentRangeValue)}}setDateRangeSelection(t){this.selectedDateRangeId=t;const i=this.dateRangeOptions.find((i=>i.id===t));if(i){this.currentRangeValue=i}return i}closeDropdown(){const t=this.hostElement.shadowRoot.querySelector("ix-dropdown");if(t){t.show=false}}getButtonLabel(){var t,i;if(this.selectedDateRangeId==="custom"&&((t=this.currentRangeValue)===null||t===void 0?void 0:t.from)){let t=this.currentRangeValue.from;if(this.currentRangeValue.to){t+=` - ${this.currentRangeValue.to}`}return t}if(!this.selectedDateRangeId){return this.i18nNoRange}if(!this.dateRangeOptions||((i=this.dateRangeOptions)===null||i===void 0?void 0:i.length)===0){return this.i18nNoRange}const e=this.dateRangeOptions.find((t=>t.id===this.selectedDateRangeId));if(!e){console.error(`Cannot find range option with id ${this.selectedDateRangeId}`);return this.i18nNoRange}return e.label}render(){var t,i,o;return e(a,{key:"2cad55fd1448a2a553abb8bdf50f9245d2cc71bf"},e("ix-button",{key:"77bd4e5f89d500b0323c5a2771cb2268601a87d3","data-testid":"date-dropdown-trigger","data-date-dropdown-trigger":true,variant:this.variant,loading:this.loading,icon:n,ref:this.triggerRef,disabled:this.disabled,ariaLabel:this.ariaLabelDropdownButton},this.getButtonLabel()),e("ix-dropdown",{key:"e1108d1cdac327961e3147d10f380f8d9850449c","data-testid":"date-dropdown","data-date-dropdown":true,class:"min-width max-height",trigger:this.triggerRef.waitForCurrent(),closeBehavior:"outside",placement:"bottom-start",onShowChanged:({detail:t})=>{if(!t&&this.selectedDateRangeId==="custom"&&this.datePickerTouched&&this.currentRangeValue){this.onDateSelect(this.currentRangeValue)}}},e("ix-layout-grid",{key:"fd7ece26cbcda9da063b1832ca7c010fd508ae8b",noMargin:true},e("ix-row",{key:"8854518f7534f9c52be1d74373c8a6d822983bca"},((t=this.dateRangeOptions)===null||t===void 0?void 0:t.length)>1&&e("ix-col",{key:"8e7e4d96a0e91d91cee20f961b37da7645e0a28e",class:{"no-margin":true,"border-right":this.selectedDateRangeId==="custom"}},this.dateRangeOptions.map((t=>e("ix-dropdown-item",{label:t.label,onClick:()=>this.onRangeListSelect(t.id),checked:this.selectedDateRangeId===t.id}))),e("div",{key:"f9e7879a9f2e00c5bbcd7ab454cf491345a2f1ee",hidden:this.customRangeDisabled},e("ix-dropdown-item",{key:"e373366109b1ac41af77fc4fcab8aeb4a5cf7a29",label:this.i18nCustomItem,checked:this.selectedDateRangeId==="custom",onClick:()=>this.onRangeListSelect("custom")}))),e("ix-col",{key:"4e4ad3072863235f5dda814f24811e982f407c9b",class:"no-margin"},this.selectedDateRangeId==="custom"&&e(s,{key:"a9c540a66333322c54cf7814231f6213806b86db"},e("ix-date-picker",{key:"7e59d29e3a49bee9098879b51b23d9c6fbec5c6b",embedded:true,locale:this.locale,onDateChange:t=>{t.stopPropagation();this.currentRangeValue=Object.assign(Object.assign({},t.detail),{id:"custom"});this.datePickerTouched=true},onDateRangeChange:t=>t.stopPropagation(),format:this.format,singleSelection:this.singleSelection,from:this.from||((i=this.currentRangeValue)===null||i===void 0?void 0:i.from),to:this.to||((o=this.currentRangeValue)===null||o===void 0?void 0:o.to),minDate:this.minDate,maxDate:this.maxDate,today:this.today,weekStartIndex:this.weekStartIndex,showWeekNumbers:this.showWeekNumbers}),e("div",{key:"837f09d7b578640927e904f4adc2aef7fda7e65e",class:"pull-right"},e("ix-button",{key:"09e9fbdf94d44bc52832d6787206aaded06a3aeb",onClick:()=>{if(this.currentRangeValue){this.onDateSelect(this.currentRangeValue)}}},this.i18nDone))))))))}get hostElement(){return o(this)}static get watchers(){return{dateRangeId:["onDateRangeIdChange"],to:["onDateRangeIdChange"],from:["onDateRangeIdChange"],dateRangeOptions:["onDateRangeOptionsChange"],disabled:["onDisabledChange"]}}};c.style=d;export{c as ix_date_dropdown};
//# sourceMappingURL=p-ea410634.entry.js.map