import{r as t,c as i,h as o,H as e,g as a}from"./p-CtoreFVF.js";import{a as s}from"./p-DhE1t8Qh.js";import{b as n,a as l}from"./p-Bb7pDeaQ.js";import{A as r}from"./p-C5MWUgDN.js";import{O as d}from"./p-D5eiEBbz.js";function h(t,i,o=3e3){return new Promise(((e,a)=>{const s=Date.now();const n=()=>{const l=i.querySelector(t);if(l){e(l)}else{if(Date.now()-s<o){setTimeout(n)}else{a()}}};n()}))}const c="::backdrop{background:var(--theme-color-lightbox, rgba(0, 0, 0, 0.5490196078))}:focus-visible{outline:none !important}:host{display:none}:host dialog{--ix-dialog-padding:1rem;margin:0;padding:var(--ix-dialog-padding);padding-top:calc(var(--ix-dialog-padding) + var(--ix-safe-area-inset-top));padding-bottom:calc(var(--ix-dialog-padding) + var(--ix-safe-area-inset-bottom));left:50%}:host dialog::backdrop{-webkit-backdrop-filter:blur(2.7182817459px);backdrop-filter:blur(2.7182817459px)}:host .modal{display:flex;flex-direction:column;position:fixed;border:none;border-radius:var(--theme-default-border-radius);background:var(--theme-modal--background);box-shadow:var(--theme-shadow-4);color:var(--theme-color-std-text);overflow:visible;max-height:80vh;pointer-events:all}:host .modal-size-360{width:22.5rem}:host .modal-size-480{width:30rem}:host .modal-size-600{width:37.5rem}:host .modal-size-720{width:45rem}:host .modal-size-840{width:52.5rem}:host .modal-size-full-width{width:95%}:host .modal-size-full-screen{border-radius:0;left:0 !important;top:0 !important;transform:none !important;box-shadow:none;--ix-dialog-full-screen-height:calc(\n    var(--ix-safe-area-inset-top) + var(--ix-safe-area-inset-bottom)\n  );width:calc(100% - var(--ix-dialog-padding) * 2);min-width:calc(100% - var(--ix-dialog-padding) * 2);max-width:calc(100% - var(--ix-dialog-padding) * 2);min-height:calc(100% - var(--ix-dialog-padding) * 2 - var(--ix-dialog-full-screen-height));max-height:calc(100% - var(--ix-dialog-padding) * 2 - var(--ix-dialog-full-screen-height))}:host dialog.modal-size-full-screen::backdrop{background:var(--theme-modal--background)}:host .dialog-backdrop{display:block;position:fixed;width:100vw;height:100vh;top:0;left:0;pointer-events:none}:host ::slotted(ix-modal-footer){margin-top:auto}:host(.visible){display:block}:host(.align-center) dialog{margin:0;left:50%;top:50%}:host(.no-backdrop) dialog::backdrop{background-color:transparent !important;-webkit-backdrop-filter:none !important;backdrop-filter:none !important}:host(.with-icon) ::slotted(ix-modal-footer),:host(.with-icon) ::slotted(ix-modal-content){margin-left:3rem}";var f=undefined&&undefined.__decorate||function(t,i,o,e){var a=arguments.length,s=a<3?i:e===null?e=Object.getOwnPropertyDescriptor(i,o):e,n;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")s=Reflect.decorate(t,i,o,e);else for(var l=t.length-1;l>=0;l--)if(n=t[l])s=(a<3?n(s):a>3?n(i,o,s):n(i,o))||s;return a>3&&s&&Object.defineProperty(i,o,s),s};const p=class{constructor(o){t(this,o);this.dialogClose=i(this,"dialogClose",7);this.dialogDismiss=i(this,"dialogDismiss",7);this.ariaAttributes={};this.isMouseDownInsideDialog=false;this.size="360";this.disableAnimation=false;this.hideBackdrop=false;this.closeOnBackdropClick=false;this.centered=false;this.disableEscapeClose=false;this.modalVisible=false}onKey(t){if(t.key==="Escape"){t.preventDefault()}}get dialog(){return this.hostElement.shadowRoot.querySelector("dialog")}slideInModal(){const t=this.disableAnimation?0:r.mediumTime;const i=this.centered?["-90%","-50%"]:[0,40];s(this.dialog,{duration:t,opacity:[0,1],translateY:i,translateX:["-50%","-50%"],easing:"easeOutSine"})}slideOutModal(t){const i=this.disableAnimation?0:r.mediumTime;const o=this.centered?["-50%","-90%"]:[40,0];s(this.dialog,{duration:i,opacity:[1,0],translateY:o,translateX:["-50%","-50%"],easing:"easeInSine",complete:()=>{if(t){t()}}})}onMouseDown(t){this.isMouseDownInsideDialog=this.isPointInsideDialog(t.clientX,t.clientY)}onMouseUp(t){const i=this.isPointInsideDialog(t.clientX,t.clientY);if(this.closeOnBackdropClick&&!this.isMouseDownInsideDialog&&!i){this.dismissModal()}}isPointInsideDialog(t,i){const o=this.dialog.getBoundingClientRect();return t>=o.left&&t<=o.right&&i>=o.top&&i<=o.bottom}async showModal(){try{const t=await h("dialog",this.hostElement.shadowRoot);this.modalVisible=true;t.showModal()}catch(t){console.error("HTMLDialogElement not existing")}}async dismissModal(t){if(!this.modalVisible){return}let i=true;if(this.beforeDismiss!==undefined){i=await this.beforeDismiss(t)}if(!i){return}this.slideOutModal((()=>{this.modalVisible=false;this.dialog.close(JSON.stringify({type:"dismiss",reason:t},null,2));this.dialogDismiss.emit(t)}))}async closeModal(t){if(!this.modalVisible){return}this.slideOutModal((()=>{this.modalVisible=false;this.dialog.close(JSON.stringify({type:"close",reason:t},null,2));this.dialogClose.emit(t)}))}componentDidLoad(){this.slideInModal()}componentWillLoad(){this.ariaAttributes=n(this.hostElement)}render(){return o(e,{key:"0170729f63356223c39bcd6b0bb7124b2036f2c4",class:{visible:this.modalVisible,"no-backdrop":this.hideBackdrop,"align-center":this.centered}},o("div",{key:"436b9f2efce7279defa936c9ee79fa44d090e388",class:"dialog-backdrop"},o("dialog",{key:"e3bc4891433993a5dcbe186011fd91d70277ca3d","aria-modal":l(true),"aria-describedby":this.ariaAttributes["aria-describedby"],"aria-labelledby":this.ariaAttributes["aria-labelledby"],class:{modal:true,[`modal-size-${this.size}`]:true},onClose:()=>this.dismissModal(),onMouseDown:t=>this.onMouseDown(t),onMouseUp:t=>this.onMouseUp(t),onCancel:t=>{t.preventDefault();this.dismissModal()}},o("slot",{key:"5a3e86b9c04f8e1564be6026b0352940978f0666"}))))}get hostElement(){return a(this)}};f([d("keydown",(t=>t.disableEscapeClose))],p.prototype,"onKey",null);p.style=c;export{p as ix_modal};
//# sourceMappingURL=p-ea37abf6.entry.js.map