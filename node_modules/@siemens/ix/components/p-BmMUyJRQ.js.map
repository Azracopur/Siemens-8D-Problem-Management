{"file":"p-BmMUyJRQ.js","mappings":"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","names":["__stencil_proxyCustomElement","HTMLElement"],"sources":["src/components/time-picker/time-picker.scss?tag=ix-time-picker&encapsulation=shadow","src/components/time-picker/time-picker.tsx"],"sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n@use './common-variables' as vars;\n@use 'mixins/shadow-dom/component';\n@use 'mixins/input';\n@use 'legacy/components/forms';\n\n@include input.form;\n\n:host {\n  display: block;\n  position: relative;\n  width: fit-content;\n\n  @include component.ix-component;\n\n  .standaloneAppearance {\n    box-shadow: none;\n  }\n\n  .hidden {\n    display: none;\n  }\n\n  .header {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: vars.$default-control-height;\n  }\n\n  .clock {\n    display: flex;\n    justify-content: center;\n    align-items: start;\n\n    .flex {\n      display: flex;\n      height: 100%;\n      align-items: start;\n\n      .columns {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: space-around;\n\n        .column-header {\n          height: 2.5rem;\n          width: 2.5rem;\n          line-height: 2.5rem;\n          text-align: center;\n          color: var(--theme-color-soft-text);\n          text-overflow: ellipsis;\n          overflow: hidden;\n          white-space: nowrap;\n        }\n      }\n\n      .column-separator {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        min-height: 100%;\n        margin-top: 3rem;\n        width: 0.5rem;\n      }\n    }\n\n    .element-list {\n      list-style-type: none;\n      overflow: auto;\n      padding: 0.0625rem;\n      margin: -0.0625rem;\n      max-height: calc(2.5rem * 6 + 0.125rem * 6);\n\n      button {\n        all: unset;\n      }\n\n      .element-container {\n        box-sizing: border-box;\n        width: 2.5rem;\n        height: 2.5rem;\n        margin-bottom: 0.125rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        cursor: pointer;\n        color: var(--theme-color-primary);\n\n        &:hover {\n          background-color: var(--theme-datepicker-day--background--hover);\n        }\n\n        &:focus-visible {\n          box-shadow: 0 0 0 1px var(--theme-color-focus-bdr);\n        }\n      }\n\n      .selected {\n        background-color: var(--theme-datepicker-day--background--selected);\n        color: var(--theme-datepicker-day--color--selected);\n        font-weight: var(--theme-font-weight-bold);\n\n        &:hover {\n          background-color: var(\n            --theme-datepicker-day--background--selected-hover\n          );\n        }\n\n        &:focus-visible {\n          border: 0.0625rem solid var(--theme-color-inv-contrast-text);\n        }\n      }\n\n      .element-list-padding {\n        width: 2.5rem;\n        height: calc(2.5rem * 5 + 5 * 0.125rem);\n        min-height: calc(2.5rem * 5 + 5 * 0.125rem);\n      }\n    }\n\n    div.element-list {\n      scrollbar-width: none;\n      -ms-overflow-style: none;\n\n      &::-webkit-scrollbar {\n        display: none;\n      }\n    }\n  }\n\n  .footer {\n    display: flex;\n    justify-content: space-between;\n    gap: 0.5rem;\n    flex-wrap: wrap;\n\n    .confirm-button {\n      margin-left: auto;\n    }\n\n    &--compact {\n      flex-direction: column;\n      align-items: center;\n\n      .confirm-button {\n        margin-left: initial;\n      }\n    }\n  }\n\n  .default-space {\n    margin-left: vars.$default-space;\n  }\n\n  .text-align {\n    text-align: center;\n  }\n}\n","/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Method,\n  Prop,\n  State,\n  Watch,\n} from '@stencil/core';\nimport { DateTime } from 'luxon';\nimport { OnListener } from '../utils/listener';\nimport type { TimePickerCorners } from './time-picker.types';\n\ntype TimePickerDescriptorUnit = 'hour' | 'minute' | 'second' | 'millisecond';\n\ninterface TimePickerDescriptor {\n  unit: TimePickerDescriptorUnit;\n  header: string;\n  hidden: boolean;\n  numberArray: number[];\n  focusedValue: number;\n}\n\ninterface TimeOutputFormat {\n  hour: string;\n  minute: string;\n  second: string;\n  millisecond: string;\n}\n\nconst LUXON_FORMAT_PATTERNS = {\n  // h, hh, H, HH and various time formats that include hours\n  hours: /\\b[Hh]\\b|HH|hh|H{3,4}|h{3,4}|t|tt|ttt|tttt|T|TT|TTT|TTTT/,\n  // m, mm and time formats that include minutes\n  minutes: /\\bm\\b|mm|t|tt|ttt|tttt|T|TT|TTT|TTTT/,\n  // s, ss and time formats that include seconds\n  seconds: /\\bs\\b|ss|tt|ttt|tttt|TT|TTT|TTTT/,\n  // S, SSS (milliseconds), u/uu/uuu (fractional seconds), x/X (timestamps)\n  milliseconds: /\\bS\\b|SSS|u|uu|uuu/,\n};\n\nconst HOUR_INTERVAL_DEFAULT = 1;\nconst MINUTE_INTERVAL_DEFAULT = 1;\nconst SECOND_INTERVAL_DEFAULT = 1;\nconst MILLISECOND_INTERVAL_DEFAULT = 100;\n\nconst CONFIRM_BUTTON_DEFAULT = 'Confirm';\nconst HEADER_DEFAULT = 'Time';\n\nconst FORMATTED_TIME_EMPTY: TimeOutputFormat = {\n  hour: '',\n  minute: '',\n  second: '',\n  millisecond: '',\n};\n\n@Component({\n  tag: 'ix-time-picker',\n  styleUrl: 'time-picker.scss',\n  shadow: true,\n})\nexport class TimePicker {\n  @Element() hostElement!: HTMLIxTimePickerElement;\n\n  /**\n   * Format of time string\n   * See {@link https://moment.github.io/luxon/#/formatting?id=table-of-tokens} for all available tokens.\n   * Note: Formats that combine date and time (like f or F) are not supported. Timestamp tokens x and X are not supported either.\n   */\n  @Prop() format: string = 'TT';\n  @Watch('format')\n  watchFormatIntervalPropHandler(newValue: string) {\n    if (!newValue) {\n      return;\n    }\n\n    this.initPicker();\n    this.updateScrollPositions();\n  }\n\n  /**\n   * Corner style\n   */\n  @Prop() corners: TimePickerCorners = 'rounded';\n\n  /**\n   * Embedded style (for use in other components)\n   */\n  @Prop() embedded = false;\n\n  /**\n   * @internal Temporary prop needed until datetime-picker is reworked for new design\n   */\n  @Prop() dateTimePickerAppearance: boolean = false;\n\n  /**\n   * Hides the header of the picker.\n   *\n   * @since 3.2.0\n   */\n  @Prop() hideHeader: boolean = false;\n\n  /**\n   * Interval for hour selection\n   *\n   * @since 3.2.0\n   */\n  @Prop({ mutable: true }) hourInterval: number = HOUR_INTERVAL_DEFAULT;\n  @Watch('hourInterval')\n  watchHourIntervalPropHandler(newValue: number) {\n    if (\n      Number.isInteger(newValue) &&\n      newValue >= 0 &&\n      newValue <= (this.timeRef ? 12 : 23)\n    ) {\n      this.setTimePickerDescriptors();\n      return;\n    }\n\n    this.printIntervalError('hour', newValue);\n    this.hourInterval = HOUR_INTERVAL_DEFAULT;\n  }\n\n  /**\n   * Interval for minute selection\n   *\n   * @since 3.2.0\n   */\n  @Prop({ mutable: true }) minuteInterval: number = MINUTE_INTERVAL_DEFAULT;\n  @Watch('minuteInterval')\n  watchMinuteIntervalPropHandler(newValue: number) {\n    if (newValue >= 0 && newValue <= 59) {\n      this.setTimePickerDescriptors();\n      return;\n    }\n\n    this.printIntervalError('minute', newValue);\n    this.minuteInterval = MINUTE_INTERVAL_DEFAULT;\n  }\n\n  /**\n   * Interval for second selection\n   *\n   * @since 3.2.0\n   */\n  @Prop({ mutable: true }) secondInterval: number = SECOND_INTERVAL_DEFAULT;\n  @Watch('secondInterval')\n  watchSecondIntervalPropHandler(newValue: number) {\n    if (newValue >= 0 && newValue <= 59) {\n      this.setTimePickerDescriptors();\n      return;\n    }\n\n    this.printIntervalError('second', newValue);\n    this.secondInterval = SECOND_INTERVAL_DEFAULT;\n  }\n\n  /**\n   * Interval for millisecond selection\n   *\n   * @since 3.2.0\n   */\n  @Prop({ mutable: true }) millisecondInterval: number =\n    MILLISECOND_INTERVAL_DEFAULT;\n  @Watch('millisecondInterval')\n  watchMillisecondIntervalPropHandler(newValue: number) {\n    if (newValue >= 0 && newValue <= 999) {\n      this.setTimePickerDescriptors();\n      return;\n    }\n\n    this.printIntervalError('millisecond', newValue);\n    this.millisecondInterval = MILLISECOND_INTERVAL_DEFAULT;\n  }\n\n  private printIntervalError(intervalName: string, value: number) {\n    console.error(\n      `Value ${value} is not valid for ${intervalName}-interval. Falling back to default.`\n    );\n  }\n\n  /**\n   * Select time with format string\n   * Format has to match the `format` property.\n   */\n  @Prop() time?: string;\n\n  @Watch('time')\n  watchTimePropHandler(newValue: string) {\n    const timeFormat = DateTime.fromFormat(newValue, this.format);\n    if (!timeFormat.isValid) {\n      throw new Error('Format is not supported or not correct');\n    }\n\n    this._time = timeFormat;\n  }\n\n  /**\n   * Get default time value\n   * @returns DateTime.now() for empty state (no selection)\n   */\n  private getDefaultTime(): DateTime | undefined {\n    return DateTime.now();\n  }\n\n  /**\n   * Text of the time confirm button\n   */\n  @Prop({ attribute: 'i18n-confirm-time' }) i18nConfirmTime =\n    CONFIRM_BUTTON_DEFAULT;\n\n  /**\n   * Text for top header\n   */\n  @Prop({ attribute: 'i18n-header' }) i18nHeader: string = HEADER_DEFAULT;\n\n  /**\n   * Text for hour column header\n   */\n  @Prop({ attribute: 'i18n-column-header' }) i18nHourColumnHeader: string =\n    'hr';\n\n  /**\n   * Text for minute column header\n   */\n  // eslint-disable-next-line @stencil-community/decorators-style\n  @Prop({ attribute: 'i18n-minute-column-header' })\n  i18nMinuteColumnHeader: string = 'min';\n\n  /**\n   * Text for second column header\n   */\n  // eslint-disable-next-line @stencil-community/decorators-style\n  @Prop({ attribute: 'i18n-second-column-header' })\n  i18nSecondColumnHeader: string = 'sec';\n\n  /**\n   * Text for millisecond column header\n   */\n  // eslint-disable-next-line @stencil-community/decorators-style\n  @Prop({ attribute: 'i18n-millisecond-column-header' })\n  i18nMillisecondColumnHeader: string = 'ms';\n\n  /**\n   * Time event\n   */\n  @Event() timeSelect!: EventEmitter<string>;\n\n  /**\n   * Time change event\n   */\n  @Event() timeChange!: EventEmitter<string>;\n\n  /**\n   * Get the current time based on the wanted format\n   */\n  @Method()\n  async getCurrentTime(): Promise<string | undefined> {\n    return this._time?.toFormat(this.format);\n  }\n\n  @State() private _time?: DateTime;\n  @Watch('_time')\n  onTimeChange() {\n    const formattedTimeOld = this.formattedTime;\n    this.setTimeRef();\n    this.formattedTime = this.getFormattedTime();\n\n    this.updateScrollPositions(formattedTimeOld);\n  }\n\n  @State() private timeRef?: 'AM' | 'PM' | undefined;\n  @State() private formattedTime: TimeOutputFormat = FORMATTED_TIME_EMPTY;\n  @State() private timePickerDescriptors: TimePickerDescriptor[] = [];\n  @State() private isUnitFocused: boolean = false;\n  @State() private focusedUnit: TimePickerDescriptorUnit = 'hour';\n  @State() private focusedValue: number = 0;\n\n  private visibilityObserver?: MutationObserver;\n  private focusScrollAlignment: 'start' | 'end' = 'start';\n\n  componentWillLoad() {\n    this.initPicker();\n  }\n\n  private initPicker() {\n    let parsedTime: DateTime | undefined;\n\n    if (this.time) {\n      parsedTime = DateTime.fromFormat(this.time, this.format);\n\n      if (!parsedTime.isValid) {\n        console.error(\n          `Invalid time format. The configured format does not match the format of the passed time. ${parsedTime.invalidReason}: ${parsedTime.invalidExplanation}`\n        );\n        parsedTime = this.getDefaultTime();\n      }\n    } else {\n      parsedTime = this.getDefaultTime();\n    }\n\n    this._time = parsedTime;\n\n    this.setTimeRef();\n    this.setTimePickerDescriptors();\n    this.setInitialFocusedValueAndUnit();\n\n    this.watchHourIntervalPropHandler(this.hourInterval);\n    this.watchMinuteIntervalPropHandler(this.minuteInterval);\n    this.watchSecondIntervalPropHandler(this.secondInterval);\n    this.watchMillisecondIntervalPropHandler(this.millisecondInterval);\n  }\n\n  componentDidLoad() {\n    this.updateScrollPositions();\n    this.setupVisibilityObserver();\n  }\n\n  componentDidRender() {\n    if (this.isUnitFocused) {\n      const elementContainer = this.getElementContainer(\n        this.focusedUnit,\n        this.focusedValue\n      );\n      const elementList = this.getElementList(this.focusedUnit);\n\n      if (elementContainer) {\n        elementContainer.focus({ preventScroll: true });\n\n        if (!this.isElementVisible(elementContainer, elementList)) {\n          this.scrollElementIntoView(\n            elementContainer,\n            elementList,\n            this.focusScrollAlignment\n          );\n        }\n      }\n    }\n  }\n\n  disconnectedCallback() {\n    if (this.visibilityObserver) {\n      this.visibilityObserver.disconnect();\n    }\n  }\n\n  @OnListener<TimePicker>('keydown')\n  handleKeyDown(event: KeyboardEvent) {\n    if (!this.isUnitFocused) {\n      return;\n    }\n\n    let newValue = this.focusedValue;\n    let shouldPreventDefault = true;\n    let newValueInterval;\n\n    switch (this.focusedUnit) {\n      case 'hour':\n        newValueInterval = this.hourInterval;\n        break;\n      case 'minute':\n        newValueInterval = this.minuteInterval;\n        break;\n      case 'second':\n        newValueInterval = this.secondInterval;\n        break;\n      case 'millisecond':\n        newValueInterval = this.millisecondInterval;\n        break;\n    }\n\n    switch (event.key) {\n      case 'Tab':\n        shouldPreventDefault = false;\n        this.isUnitFocused = false;\n        break;\n\n      case 'ArrowUp':\n        newValue -= newValueInterval;\n        this.focusScrollAlignment = 'start';\n        this.updateFocusedValue(newValue);\n        this.updateDescriptorFocusedValue(this.focusedUnit, this.focusedValue);\n        break;\n\n      case 'ArrowDown':\n        newValue += newValueInterval;\n        this.focusScrollAlignment = 'end';\n        this.updateFocusedValue(newValue);\n        this.updateDescriptorFocusedValue(this.focusedUnit, this.focusedValue);\n        break;\n\n      case 'Enter':\n      case ' ':\n        this.select(this.focusedUnit, this.focusedValue);\n        break;\n\n      default:\n        return;\n    }\n\n    if (shouldPreventDefault) {\n      event.preventDefault();\n    }\n  }\n\n  onUnitCellBlur(unit: TimePickerDescriptorUnit, event: FocusEvent) {\n    const relatedTarget = event.relatedTarget as HTMLElement;\n\n    // Check if column lost focus to scroll back to selected value\n    if (relatedTarget) {\n      const relatedUnit =\n        relatedTarget.dataset.elementContainerId?.split('-')[0];\n\n      if (relatedUnit !== unit) {\n        this.elementListScrollToTop(\n          unit,\n          Number(this.formattedTime[unit]),\n          'smooth'\n        );\n      }\n    }\n\n    this.isUnitFocused = false;\n    const focusedValue = Number(this.formattedTime[unit]);\n\n    this.updateDescriptorFocusedValue(unit, focusedValue);\n  }\n\n  onUnitCellFocus(unit: TimePickerDescriptorUnit, value: number) {\n    this.isUnitFocused = true;\n    this.focusedUnit = unit;\n    this.focusedValue = value;\n\n    this.updateDescriptorFocusedValue(unit, value);\n  }\n\n  private getElementList(unit: TimePickerDescriptorUnit): HTMLDivElement {\n    return this.hostElement.shadowRoot?.querySelector(\n      `[data-element-list-id=\"${unit}\"]`\n    ) as HTMLDivElement;\n  }\n\n  private getElementContainer(\n    unit: TimePickerDescriptorUnit,\n    number: number\n  ): HTMLDivElement {\n    return this.hostElement.shadowRoot?.querySelector(\n      `[data-element-container-id=\"${unit}-${number}\"]`\n    ) as HTMLDivElement;\n  }\n\n  private isElementVisible(\n    element: HTMLElement,\n    container: HTMLElement\n  ): boolean {\n    const elementRect = element.getBoundingClientRect();\n    const containerRect = container.getBoundingClientRect();\n\n    return (\n      elementRect.top >= containerRect.top &&\n      elementRect.bottom <= containerRect.bottom\n    );\n  }\n\n  private scrollElementIntoView(\n    element: HTMLElement,\n    container: HTMLElement,\n    alignment: 'start' | 'end'\n  ) {\n    const SCROLL_BUFFER = 1;\n    const containerRect = container.getBoundingClientRect();\n    const elementRect = element.getBoundingClientRect();\n\n    if (alignment === 'end') {\n      container.scrollTop +=\n        elementRect.bottom - containerRect.bottom + SCROLL_BUFFER;\n    } else {\n      container.scrollTop +=\n        elementRect.top - containerRect.top - SCROLL_BUFFER;\n    }\n  }\n\n  private updateFocusedValue(value: number) {\n    const numberArray = this.getNumberArrayForUnit(this.focusedUnit);\n    const maxValue = numberArray[numberArray.length - 1];\n    const minValue = numberArray[0];\n\n    if (value > maxValue) {\n      value = minValue;\n      this.focusScrollAlignment = 'start';\n    } else if (value < minValue) {\n      value = maxValue;\n      this.focusScrollAlignment = 'end';\n    }\n\n    this.focusedValue = value;\n  }\n\n  private setInitialFocusedValueAndUnit() {\n    const firstVisibleDescriptor = this.timePickerDescriptors.find(\n      (descriptor) => !descriptor.hidden\n    );\n    if (!firstVisibleDescriptor) {\n      return;\n    }\n\n    const selectedValue = Number(\n      this.formattedTime[firstVisibleDescriptor.unit]\n    );\n    const isValidSelection =\n      firstVisibleDescriptor.numberArray.includes(selectedValue);\n\n    this.focusedValue = isValidSelection\n      ? selectedValue\n      : firstVisibleDescriptor.numberArray[0];\n\n    this.focusedUnit = firstVisibleDescriptor.unit;\n  }\n\n  private setupVisibilityObserver() {\n    let dropdownElement: Element | null = this.hostElement;\n    while (dropdownElement && dropdownElement.tagName !== 'IX-DROPDOWN') {\n      dropdownElement = dropdownElement.parentElement;\n    }\n\n    if (!dropdownElement) {\n      return;\n    }\n\n    this.visibilityObserver = new MutationObserver((mutations) =>\n      this.mutationObserverCallback(mutations)\n    );\n\n    this.visibilityObserver.observe(dropdownElement, {\n      attributes: true,\n      attributeFilter: ['class', 'style'],\n    });\n  }\n\n  private mutationObserverCallback(mutations: MutationRecord[]) {\n    for (const mutation of mutations) {\n      if (mutation.type !== 'attributes') {\n        continue;\n      }\n\n      const dropdown = mutation.target as HTMLElement;\n\n      if (!dropdown.classList.contains('show')) {\n        // keep picker in sync with input\n        if (this.time) {\n          const timeFormat = DateTime.fromFormat(this.time, this.format);\n          if (timeFormat.isValid) {\n            this._time = DateTime.fromFormat(this.time, this.format);\n            this.setInitialFocusedValueAndUnit();\n          }\n        }\n\n        continue;\n      }\n\n      const elementsReady = this.areElementsRendered();\n      if (!elementsReady) {\n        continue;\n      }\n\n      this.updateScrollPositions();\n    }\n  }\n\n  private areElementsRendered(): boolean {\n    const elementLists =\n      this.hostElement.shadowRoot?.querySelectorAll('.element-list');\n\n    if (!elementLists || elementLists.length === 0) {\n      return false;\n    }\n\n    return Array.from(elementLists).some(\n      (list) => (list as HTMLElement).offsetHeight > 0\n    );\n  }\n\n  private getFormattedTime(): TimeOutputFormat {\n    if (!this._time) {\n      return FORMATTED_TIME_EMPTY;\n    }\n\n    return {\n      hour:\n        this.timeRef !== undefined\n          ? this._time.toFormat('h')\n          : this._time.toFormat('H'),\n      minute: this._time.toFormat('m'),\n      second: this._time.toFormat('s'),\n      millisecond: this._time.toFormat('S'),\n    };\n  }\n\n  private timeUpdate(unit: TimePickerDescriptorUnit, value: number): number {\n    let maxValue = DateTime.now().endOf('day').get(unit);\n\n    if (unit === 'hour') {\n      if (this.timeRef === 'PM') {\n        // 12 PM should remain 12, other PM hours add 12\n        value = value === 12 ? 12 : value + 12;\n      } else if (this.timeRef === 'AM') {\n        // 12 AM should be 0, other AM hours remain as is\n        value = value === 12 ? 0 : value;\n        maxValue = 12;\n      }\n    }\n\n    if (value > maxValue) {\n      value = maxValue;\n    } else if (value < 0) {\n      value = 0;\n    }\n\n    if (!this._time) {\n      this._time = DateTime.now().startOf('day');\n    }\n\n    this._time = this._time.set({\n      [unit]: value,\n    });\n\n    return value;\n  }\n\n  private changeTimeReference(newTimeRef: 'AM' | 'PM') {\n    if (this.timeRef === newTimeRef) {\n      return;\n    }\n\n    if (!this._time) {\n      this._time = DateTime.now().startOf('day');\n    }\n\n    this.timeRef = newTimeRef;\n    const currentHour = this._time.hour;\n\n    if (newTimeRef === 'PM' && currentHour < 12) {\n      this._time = this._time.plus({ hours: 12 });\n    } else if (newTimeRef === 'AM' && currentHour >= 12) {\n      this._time = this._time.minus({ hours: 12 });\n    }\n\n    this.timeChange.emit(this._time.toFormat(this.format));\n  }\n\n  private isFormat12Hour(format: string): boolean {\n    // Remove any text that's inside quotes (literal text in Luxon format strings)\n    let cleanFormat = '';\n    let inQuote = false;\n\n    for (let i = 0; i < format.length; i++) {\n      const char = format[i];\n      if (char === \"'\") {\n        inQuote = !inQuote;\n      } else if (!inQuote) {\n        cleanFormat += char;\n      }\n    }\n\n    // Check for specific 12-hour format tokens\n    // Case-sensitive matching to distinguish between 'h' and 'H'\n    return /h|a|t/.test(cleanFormat);\n  }\n\n  private setTimeRef() {\n    const uses12HourFormat = this.isFormat12Hour(this.format);\n\n    if (uses12HourFormat && this._time) {\n      this.timeRef = this._time!.hour >= 12 ? 'PM' : 'AM';\n    } else {\n      this.timeRef = undefined;\n    }\n  }\n\n  private getInitialFocusedValueForUnit(\n    unit: TimePickerDescriptorUnit,\n    numberArray: number[]\n  ): number {\n    const selectedValue = Number(this.formattedTime[unit]);\n    return numberArray.includes(selectedValue) ? selectedValue : numberArray[0];\n  }\n\n  private setTimePickerDescriptors() {\n    let hourNumbers = [];\n    let minuteNumbers = [];\n    let secondNumbers = [];\n    let millisecondsNumbers = [];\n\n    if (this.timeRef !== undefined) {\n      hourNumbers = Array.from(\n        { length: Math.ceil(12 / this.hourInterval) },\n        (_, i) => i * this.hourInterval + 1\n      ).filter((hour) => hour <= 12);\n    } else {\n      hourNumbers = Array.from(\n        { length: Math.ceil(24 / this.hourInterval) },\n        (_, i) => i * this.hourInterval\n      );\n    }\n\n    minuteNumbers = Array.from(\n      { length: Math.ceil(60 / this.minuteInterval) },\n      (_, i) => i * this.minuteInterval\n    );\n    secondNumbers = Array.from(\n      { length: Math.ceil(60 / this.secondInterval) },\n      (_, i) => i * this.secondInterval\n    );\n    millisecondsNumbers = Array.from(\n      { length: Math.ceil(1000 / this.millisecondInterval) },\n      (_, i) => i * this.millisecondInterval\n    );\n\n    this.timePickerDescriptors = [\n      {\n        unit: 'hour',\n        header: this.i18nHourColumnHeader,\n        hidden: !LUXON_FORMAT_PATTERNS.hours.test(this.format),\n        numberArray: hourNumbers,\n        focusedValue: this.getInitialFocusedValueForUnit('hour', hourNumbers),\n      },\n      {\n        unit: 'minute',\n        header: this.i18nMinuteColumnHeader,\n        hidden: !LUXON_FORMAT_PATTERNS.minutes.test(this.format),\n        numberArray: minuteNumbers,\n        focusedValue: this.getInitialFocusedValueForUnit(\n          'minute',\n          minuteNumbers\n        ),\n      },\n      {\n        unit: 'second',\n        header: this.i18nSecondColumnHeader,\n        hidden: !LUXON_FORMAT_PATTERNS.seconds.test(this.format),\n        numberArray: secondNumbers,\n        focusedValue: this.getInitialFocusedValueForUnit(\n          'second',\n          secondNumbers\n        ),\n      },\n      {\n        unit: 'millisecond',\n        header: this.i18nMillisecondColumnHeader,\n        hidden: !LUXON_FORMAT_PATTERNS.milliseconds.test(this.format),\n        numberArray: millisecondsNumbers,\n        focusedValue: this.getInitialFocusedValueForUnit(\n          'millisecond',\n          millisecondsNumbers\n        ),\n      },\n    ];\n\n    this.timePickerDescriptors = this.timePickerDescriptors.filter(\n      (item) => !item.hidden\n    );\n  }\n\n  private getNumberArrayForUnit(unit: TimePickerDescriptorUnit): number[] {\n    const descriptor = this.timePickerDescriptors.find(\n      (descriptor) => descriptor.unit === unit\n    );\n    return descriptor ? descriptor.numberArray : [];\n  }\n\n  private isSelected(unit: TimePickerDescriptorUnit, number: number): boolean {\n    return this.formattedTime![unit] === String(number);\n  }\n\n  private select(unit: TimePickerDescriptorUnit, number: number) {\n    if (this.isSelected(unit, number)) {\n      return;\n    }\n\n    this.formattedTime = {\n      ...this.formattedTime!,\n      [unit]: String(number),\n    };\n\n    this.timeUpdate(unit, number);\n    this.elementListScrollToTop(unit, number, 'smooth');\n    this.timeChange.emit(this._time!.toFormat(this.format));\n  }\n\n  private updateDescriptorFocusedValue(\n    unit: TimePickerDescriptorUnit,\n    value: number\n  ) {\n    const descriptorIndex = this.timePickerDescriptors.findIndex(\n      (d) => d.unit === unit\n    );\n    if (descriptorIndex !== -1) {\n      this.timePickerDescriptors = [\n        ...this.timePickerDescriptors.slice(0, descriptorIndex),\n        {\n          ...this.timePickerDescriptors[descriptorIndex],\n          focusedValue: value,\n        },\n        ...this.timePickerDescriptors.slice(descriptorIndex + 1),\n      ];\n    }\n  }\n\n  private elementListScrollToTop(\n    unit: TimePickerDescriptorUnit,\n    number: number,\n    scrollBehaviour: 'smooth' | 'instant'\n  ) {\n    const elementList = this.getElementList(unit);\n    const elementContainer = this.getElementContainer(unit, number);\n\n    if (elementList && elementContainer) {\n      const elementListHeight = elementList.clientHeight;\n      const elementContainerHeight = elementContainer.clientHeight;\n\n      // Offset which is used to adjust the scroll position to account for margins, elements being hidden, etc.\n      let scrollPositionOffset = 11;\n      if (this.hideHeader) {\n        // 56 + 1 --> height of the header container and separator\n        scrollPositionOffset -= 57;\n      }\n\n      const scrollPosition =\n        elementContainer.offsetTop -\n        elementListHeight / 2 +\n        elementContainerHeight -\n        scrollPositionOffset;\n\n      elementList.scrollTo({\n        top: scrollPosition,\n        behavior: scrollBehaviour,\n      });\n    }\n  }\n\n  /**\n   * Updates all scroll positions of the time picker elements\n   * Updates only the elements that have changed if `formattedTimeOld` is provided\n   */\n  private updateScrollPositions(\n    formattedTimeOld: TimeOutputFormat | undefined = undefined\n  ) {\n    for (const key in this.formattedTime) {\n      const unitKey = key as keyof TimeOutputFormat;\n\n      if (\n        !formattedTimeOld ||\n        this.formattedTime[unitKey] !== formattedTimeOld[unitKey]\n      ) {\n        this.elementListScrollToTop(\n          unitKey as TimePickerDescriptorUnit,\n          Number(this.formattedTime[unitKey]),\n          'instant'\n        );\n      }\n    }\n  }\n\n  private formatUnitValue(\n    unit: TimePickerDescriptorUnit,\n    value: number\n  ): string {\n    if (unit === 'millisecond') {\n      return value.toString().padStart(3, '0');\n    }\n\n    return value < 10 ? `0${value}` : value.toString();\n  }\n\n  private getColumnSeparator(currentIndex: number): string {\n    if (currentIndex + 1 < this.timePickerDescriptors.length) {\n      const nextUnit = this.timePickerDescriptors[currentIndex + 1].unit;\n      return nextUnit === 'millisecond' ? '.' : ':';\n    }\n\n    return ':';\n  }\n\n  private getElementContainerTabIndex(\n    number: number,\n    descriptorUnit: TimePickerDescriptorUnit\n  ): string {\n    const descriptor = this.timePickerDescriptors.find(\n      (d) => d.unit === descriptorUnit\n    );\n\n    if (number === descriptor?.focusedValue) {\n      return '0';\n    }\n\n    return '-1';\n  }\n\n  render() {\n    return (\n      <Host>\n        <ix-date-time-card\n          embedded={this.embedded}\n          timePickerAppearance={true}\n          corners={this.corners}\n          hasFooter={!this.dateTimePickerAppearance}\n          hideHeader={this.hideHeader}\n        >\n          <div class=\"header\" slot=\"header\">\n            <ix-typography format=\"body\">{this.i18nHeader}</ix-typography>\n          </div>\n          <div class=\"clock\">\n            {this.timePickerDescriptors.map((descriptor, index: number) => (\n              <div class=\"flex\">\n                <div class={{ columns: true, hidden: descriptor.hidden }}>\n                  <div class=\"column-header\" title={descriptor.header}>\n                    {descriptor.header}\n                  </div>\n                  <div\n                    data-element-list-id={descriptor.unit}\n                    class=\"element-list\"\n                    tabIndex={-1}\n                  >\n                    {descriptor.numberArray.map((number) => {\n                      return (\n                        <button\n                          data-element-container-id={`${descriptor.unit}-${number}`}\n                          class={{\n                            selected: this.isSelected(descriptor.unit, number),\n                            'element-container': true,\n                          }}\n                          onClick={() => {\n                            this.select(descriptor.unit, number);\n                          }}\n                          onFocus={() =>\n                            this.onUnitCellFocus(descriptor.unit, number)\n                          }\n                          onBlur={(e) =>\n                            this.onUnitCellBlur(descriptor.unit, e)\n                          }\n                          tabindex={this.getElementContainerTabIndex(\n                            number,\n                            descriptor.unit\n                          )}\n                          aria-label={`${descriptor.header}: ${number}`}\n                        >\n                          {this.formatUnitValue(descriptor.unit, number)}\n                        </button>\n                      );\n                    })}\n                    <div class=\"element-list-padding\"></div>\n                  </div>\n                </div>\n\n                {index !== this.timePickerDescriptors.length - 1 && (\n                  <div\n                    class={{\n                      'column-separator': true,\n                      hidden: descriptor.hidden,\n                    }}\n                  >\n                    {this.getColumnSeparator(index)}\n                  </div>\n                )}\n              </div>\n            ))}\n\n            {this.timeRef && (\n              <div class=\"flex\">\n                <div class=\"column-separator\"></div>\n                <div class=\"columns\">\n                  <div class=\"column-header\" title=\"AM/PM\" />\n                  <div class=\"element-list\" tabIndex={-1}>\n                    <button\n                      data-am-pm-id=\"AM\"\n                      class={{\n                        selected: this.timeRef === 'AM',\n                        'element-container': true,\n                      }}\n                      onClick={() => this.changeTimeReference('AM')}\n                      tabindex=\"0\"\n                      aria-label=\"AM\"\n                    >\n                      AM\n                    </button>\n                    <button\n                      data-am-pm-id=\"PM\"\n                      class={{\n                        selected: this.timeRef === 'PM',\n                        'element-container': true,\n                      }}\n                      onClick={() => this.changeTimeReference('PM')}\n                      tabindex=\"0\"\n                      aria-label=\"PM\"\n                    >\n                      PM\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          <div\n            class={{\n              footer: true,\n              'footer--compact': this.timePickerDescriptors.length <= 2,\n            }}\n            slot=\"footer\"\n          >\n            <ix-button\n              class=\"confirm-button\"\n              onClick={() => {\n                this.timeSelect.emit(this._time?.toFormat(this.format));\n              }}\n            >\n              {this.i18nConfirmTime}\n            </ix-button>\n          </div>\n        </ix-date-time-card>\n      </Host>\n    );\n  }\n}\n"],"version":3}