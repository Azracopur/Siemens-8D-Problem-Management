{"version":3,"file":"toast.js","sources":["../../src/toast/toast.ts"],"sourcesContent":["'use client';\n/*\n * SPDX-FileCopyrightText: 2024 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { defineCustomElement as defineToastContainer } from '@siemens/ix/components/ix-toast-container.js';\nimport { defineCustomElement as defineToast } from '@siemens/ix/components/ix-toast.js';\n\nimport { toast, ToastConfig as IxToastConfig } from '@siemens/ix';\nimport ReactDOMClient from 'react-dom/client';\n\nexport type ToastConfig = {\n  message?: string | React.ReactNode;\n  action?: React.ReactNode;\n};\n\nexport async function showToast(\n  config: Omit<IxToastConfig, 'message' | 'action'> & ToastConfig\n) {\n  // Define custom element, otherwise dynamic creation of toast container will fail\n  defineToast();\n  defineToastContainer();\n\n  if (typeof config.message === 'string' && !config.action) {\n    const toastInstance = await toast(config as IxToastConfig);\n    return toastInstance;\n  }\n\n  let toastContainer: HTMLElement | undefined;\n  let root: ReactDOMClient.Root | undefined;\n\n  if (config.message) {\n    toastContainer = document.createElement('DIV');\n    root = ReactDOMClient.createRoot(toastContainer);\n    root.render(config.message);\n  }\n\n  let toastContainerAction: HTMLElement | undefined;\n\n  if (config.action) {\n    toastContainerAction = document.createElement('DIV');\n    root = ReactDOMClient.createRoot(toastContainerAction);\n    root.render(config.action);\n  }\n\n  const toastInstance = await toast({\n    ...config,\n    message: toastContainer,\n    action: toastContainerAction,\n  });\n\n  toastInstance.onClose.once(() => {\n    root?.unmount();\n  });\n\n  return toastInstance;\n}\n"],"names":[],"mappings":";;;;;;AAoBO;;AAIL;AACA;AAEA;AACE;AACA;;AAGF;AACA;AAEA;AACE;AACA;AACA;;AAGF;AAEA;AACE;AACA;AACA;;AAGF;AACE;AACA;AACA;AACD;AAED;;AAEA;AAEA;AACF;;"}