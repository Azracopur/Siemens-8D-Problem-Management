import{r as e,c as t,h as a,H as r,g as i}from"./p-CtoreFVF.js";import{U as s}from"./p-BGzrnl_l.js";import{c as o,i as l}from"./p-8HpPmDK_.js";import{b as n}from"./p-Bb7pDeaQ.js";const h=":host{display:block;min-height:4rem;height:4rem}:host *,:host *::after,:host *::before{box-sizing:border-box}:host ::-webkit-scrollbar-button{display:none}@-moz-document url-prefix(){:host *{scrollbar-color:var(--theme-scrollbar-thumb--background) var(--theme-scrollbar-track--background);scrollbar-width:thin}}:host{}:host ::-webkit-scrollbar{width:0.5rem;height:0.5rem}:host{}:host ::-webkit-scrollbar-track{border-radius:5px;background:var(--theme-scrollbar-track--background)}:host ::-webkit-scrollbar-track:hover{background:var(--theme-scrollbar-track--background--hover)}:host{}:host ::-webkit-scrollbar-thumb{border-radius:5px;background:var(--theme-scrollbar-thumb--background)}:host{}:host ::-webkit-scrollbar-thumb:hover{background:var(--theme-scrollbar-thumb--background--hover)}:host ::-webkit-scrollbar-corner{display:none}:host .file-upload-area{display:flex;flex-direction:row;align-items:center;justify-content:space-between;overflow:hidden;height:100%;width:100%;padding:1rem;border:1px dashed var(--theme-upload--border-color);border-radius:var(--theme-upload--border-radius);color:var(--theme-upload-text--color)}:host .file-upload-area.multiline{max-height:unset;height:auto}:host .file-upload-area.multiline .glyph{align-self:flex-start;margin-block-start:3px}:host .file-upload-area.multiline>div{align-self:flex-start}:host .file-upload-area:not(.multiline) .state,:host .file-upload-area:not(.multiline) .upload-text{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host .file-upload-area:not(.disabled).file-over{border-color:var(--theme-upload--border-color--dragover);border-style:solid}:host .file-upload-area.checking{color:var(--theme-upload-text--color--checking);border-style:solid}:host .file-upload-area.disabled{border-style:solid;color:var(--theme-upload-text--color--disabled)}:host .file-upload-area ix-button{margin-inline-start:1rem}:host .file-upload-area .upload-browser{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}:host .file-upload-area .loader{margin:2.187rem auto;font-size:0.937rem;width:1rem;height:1rem;border-radius:50%;position:relative;text-indent:-9999em;animation:optimise-loading 1.1s infinite ease;transform:translateZ(0)}:host .file-upload-area .upload-filename{margin-bottom:1rem}:host .file-upload-area .state{display:flex;align-items:center}:host .file-upload-area .state>ix-spinner{margin-inline-end:0.5rem}:host .file-upload-area .state>ix-icon{margin-inline-end:0.5rem}:host .file-upload-area .state>ix-icon.icon-error{color:var(--theme-color-alarm)}:host .file-upload-area .state>ix-icon.icon-success{color:var(--theme-color-success)}:host(.disabled){pointer-events:none}";var d=undefined&&undefined.__rest||function(e,t){var a={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0)a[r]=e[r];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++){if(t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i]))a[r[i]]=e[r[i]]}return a};const c=class{get inputElement(){return this.hostElement.shadowRoot.querySelector("#upload-browser")}constructor(a){e(this,a);this.filesChanged=t(this,"filesChanged",7);this.multiple=false;this.multiline=false;this.disabled=false;this.state=s.SELECT_FILE;this.selectFileText="+ Drag files here or…";this.loadingText="Checking files…";this.uploadFailedText="Upload failed. Please try again.";this.uploadSuccessText="Upload successful";this.i18nUploadFile="Upload file…";this.i18nUploadDisabled="File upload currently not possible.";this.isFileOver=false;this.a11y={}}componentWillLoad(){this.a11y=n(this.hostElement)}fileDropped(e){e.preventDefault();if(this.disabled){return}if(!e.dataTransfer){return}const t=e.dataTransfer.files;this.isFileOver=false;this.filesToUpload=this.convertToFileArray(t);this.filesChanged.emit(this.filesToUpload)}fileOver(e){if(!e.dataTransfer){return}if(this.state!==s.LOADING){e.preventDefault();e.dataTransfer.dropEffect="move"}if(!this.multiple&&e.dataTransfer.items.length>1){e.preventDefault();e.stopPropagation();e.dataTransfer.effectAllowed="none";e.dataTransfer.dropEffect="none"}else{this.isFileOver=true}}fileLeave(){this.isFileOver=false}fileChangeEvent(e){if(this.disabled){return}if(!e.target){return}this.filesToUpload=this.convertToFileArray(e.target.files);this.filesChanged.emit(this.filesToUpload);this.inputElement.type="";this.inputElement.type="file"}convertToFileArray(e){let t=[];if(!e){return[]}if(e instanceof FileList){t=Array.from(e)}else{t=[e]}return t}renderUploadState(){if(this.disabled){return a("span",{class:"state"},a("span",{class:"upload-text"},this.i18nUploadDisabled))}switch(this.state){case s.SELECT_FILE:return a("span",{class:"state"},a("span",{class:"upload-text"},this.selectFileText));case s.LOADING:return a("span",{class:"state"},a("ix-spinner",{variant:"primary"}),a("span",{class:"upload-text"},this.loadingText));case s.UPLOAD_FAILED:return a("span",{class:"state"},a("ix-icon",{name:l,class:"icon-error"}),a("span",{class:"upload-text"},this.uploadFailedText));case s.UPLOAD_SUCCESSED:return a("span",{class:"state"},a("ix-icon",{name:o,class:"icon-success"}),a("span",{class:"upload-text"},this.uploadSuccessText));default:return""}}async setFilesToUpload(e){this.filesToUpload=e}render(){const e=this.disabled||this.state===s.LOADING;const t=this.a11y,{"aria-label":i="Upload files"}=t,o=d(t,["aria-label"]);return a(r,Object.assign({key:"8b8c68a23b429ca57854751c8a1c9358f78cbc9f"},o,{"aria-disabled":e}),a("div",{key:"1bb186087ab0d5c545a3f183ce3f6de033a837ad",class:{"file-upload-area":true,"file-over":this.state!==s.LOADING&&this.isFileOver,checking:this.state===s.LOADING,disabled:this.disabled,multiline:this.multiline},onDrop:e=>{if(this.state!==s.LOADING){this.fileDropped(e)}},onDragOver:e=>this.fileOver(e),onDragLeave:()=>this.fileLeave(),draggable:!this.disabled},this.renderUploadState(),a("div",{key:"52209f325ad967197e48f651cc6f15365be9562f"},a("input",{key:"91c11214c2f169a9dfbeaaac88a7d928ab389455","aria-label":i,"aria-disabled":e,multiple:this.multiple,type:"file",class:"upload-browser",id:"upload-browser",tabindex:"-1",onChange:e=>{this.fileChangeEvent(e)},accept:this.accept,disabled:e}),a("ix-button",{key:"807022699c0ba9ac3d81557e88cf1ae498a36cca",variant:"secondary","aria-disabled":e,onClick:()=>this.inputElement.click(),disabled:e},this.i18nUploadFile))))}get hostElement(){return i(this)}};c.style=h;export{c as ix_upload};
//# sourceMappingURL=p-74e7b03f.entry.js.map