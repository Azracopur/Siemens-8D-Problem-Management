import{r as t,h as e,H as i,g as o}from"./p-CtoreFVF.js";import{c as s,a,s as n,o as r,b as l,f as c,h}from"./p-CAqtPJ4-.js";import{r as d}from"./p-CFRrPFxi.js";import{m as f}from"./p-bcj7UEIC.js";import{g as m}from"./p-i60z1FJC.js";import{b as p}from"./p-CKoABG1h.js";const u='.dialog{margin:0;padding:0;border:none;max-width:18.25rem;width:-moz-max-content;width:max-content;background-color:transparent;overflow-wrap:break-word;box-shadow:none;overflow:visible}.tooltip-container{display:block;position:relative;width:auto;height:-moz-fit-content;height:fit-content;background:var(--theme-tootlip--background);color:var(--theme-color-std-text);padding:0.375rem 0.75rem;box-shadow:var(--theme-shadow-4);border-radius:0.25rem}.content-wrapper{overflow:auto}.tooltip-title{display:flex}.tooltip-title ::slotted(ix-icon){margin:0.125rem 0.25rem 0.125rem 0}.arrow,.arrow::before{position:absolute;width:12px;height:12px;background:inherit}.arrow{visibility:hidden}.arrow::before{visibility:visible;content:"";transform:rotate(45deg);background-color:var(--theme-tootlip--background)}';const b=-6;const v=t=>t!==null?`${t}px`:"";let y=0;const w=class{constructor(e){t(this,e);this.interactive=false;this.placement="top";this.showDelay=0;this.hideDelay=50;this.animationFrame=false;this.visible=false;this.instance=y++;this.dialogRef=f()}get arrowElement(){return this.hostElement.shadowRoot.querySelector(".arrow")}async showTooltip(t){this.clearTimeouts();if(this.showTooltipTimeout||this.visibleFor===t){return}const e=await this.dialogRef.waitForCurrent();this.showTooltipTimeout=setTimeout((()=>{this.setAnchorElement(t);e.showPopover();this.applyTooltipPosition(t,e);this.registerTooltipListener(e)}),this.showDelay)}async hideTooltip(t=this.hideDelay){this.clearTimeouts();if(this.hideTooltipTimeout||!this.visible){return}if(this.interactive&&t===50){t=150}const e=await this.dialogRef.waitForCurrent();this.hideTooltipTimeout=setTimeout((()=>{var t,i;this.setAnchorElement();e.hidePopover();(t=this.disposeAutoUpdate)===null||t===void 0?void 0:t.call(this);(i=this.disposeTooltipListener)===null||i===void 0?void 0:i.call(this)}),t)}setAnchorElement(t){if(!t){this.visibleFor=undefined;this.visible=false}else{this.visibleFor=t;this.visible=true}}computeArrowPosition({placement:t,middlewareData:e}){let{x:i,y:o}=e.arrow;const s={top:"unset",right:"unset",bottom:"unset",left:"unset"};if(t.startsWith("top")){return Object.assign(Object.assign({},s),{left:v(i),bottom:v(b)})}if(t.startsWith("right")){return Object.assign(Object.assign({},s),{left:v(b),top:v(o)})}if(t.startsWith("bottom")){return Object.assign(Object.assign({},s),{left:v(i),top:v(b)})}if(t.startsWith("left")){return Object.assign(Object.assign({},s),{right:v(b),top:v(o)})}}async computeTooltipPosition(t,e){return s(t,e,{strategy:"fixed",placement:this.placement,middleware:[n(),r(12),l({element:this.arrowElement}),c({fallbackStrategy:"initialPlacement",fallbackAxisSideDirection:"end",padding:10}),h()]})}applyTooltipArrowPosition(t){const e=this.computeArrowPosition(t);Object.assign(this.arrowElement.style,e)}async applyTooltipPosition(t,e){if(!t){return}return new Promise((i=>{var o;(o=this.disposeAutoUpdate)===null||o===void 0?void 0:o.call(this);this.disposeAutoUpdate=a(t,e,(async()=>{var o;const s=await this.computeTooltipPosition(t,e);const a=(o=s.middlewareData.hide)===null||o===void 0?void 0:o.referenceHidden;if(a){this.hideTooltip(0);i(s)}if(s.middlewareData.arrow){this.applyTooltipArrowPosition(s)}const{x:n,y:r}=s;Object.assign(e.style,{left:v(n),top:v(r)});i(s)}),{ancestorResize:true,ancestorScroll:true,elementResize:true,animationFrame:this.animationFrame})}))}async queryAnchorElements(){if(this.for){if(Array.isArray(this.for)){return this.resolveElements(this.for)}else{return this.resolveElements([this.for])}}}async resolveElements(t){const e=[];await Promise.all(t.map((async t=>{if(typeof t==="string"){const i=await d(t,this.hostElement);if(i){e.push(...i)}}else if(t instanceof HTMLElement){e.push(t)}else if(t instanceof Promise){e.push(await t)}})));return e}async registerTriggerListener(){var t;(t=this.disposeTriggerListener)===null||t===void 0?void 0:t.call(this);const e=await this.queryAnchorElements();if(!e){return}const i=[];e.forEach((t=>{i.push(...[{element:t,eventType:"mouseenter",callback:()=>{this.showTooltip(t)}},{element:t,eventType:"mouseleave",callback:()=>{this.hideTooltip()}},{element:t,eventType:"focus",callback:()=>{this.showTooltip(t)}},{element:t,eventType:"focusout",callback:()=>{this.hideTooltip()}}])}));this.disposeTriggerListener=p(i)}registerTooltipListener(t){var e;(e=this.disposeTooltipListener)===null||e===void 0?void 0:e.call(this);this.disposeTooltipListener=p([{element:t,eventType:"mouseenter",callback:()=>{if(this.interactive){this.clearHideTimeout()}}},{element:t,eventType:"focus",callback:()=>{if(this.interactive){this.clearHideTimeout()}}},{element:t,eventType:"mouseleave",callback:()=>{this.hideTooltip()}},{element:t,eventType:"focusout",callback:()=>{this.hideTooltip()}},{element:t,eventType:"click",callback:t=>{t.stopPropagation()}},{element:document,eventType:"keydown",callback:t=>{if(t.key==="Escape"){this.hideTooltip()}}}])}registerDomChangeListener(){const t=new MutationObserver((()=>{this.registerTriggerListener()}));t.observe(document.body,{attributes:true,attributeFilter:["data-ix-tooltip"],childList:true,subtree:true});this.disposeDomChangeListener=()=>{t.disconnect()}}clearHideTimeout(){clearTimeout(this.hideTooltipTimeout);this.hideTooltipTimeout=undefined}clearShowTimeout(){clearTimeout(this.showTooltipTimeout);this.showTooltipTimeout=undefined}clearTimeouts(){this.clearHideTimeout();this.clearShowTimeout()}componentWillLoad(){this.registerTriggerListener()}componentDidLoad(){this.registerDomChangeListener()}disconnectedCallback(){var t,e,i,o;this.clearTimeouts();(t=this.disposeAutoUpdate)===null||t===void 0?void 0:t.call(this);(e=this.disposeTriggerListener)===null||e===void 0?void 0:e.call(this);(i=this.disposeTooltipListener)===null||i===void 0?void 0:i.call(this);(o=this.disposeDomChangeListener)===null||o===void 0?void 0:o.call(this)}handleTitleIconSlotChange(t){const e=t.target;const i=m(e);for(const t of i){if(t.tagName.toLowerCase()==="ix-icon"){t.size="16"}}}render(){return e(i,{key:"1176f8e37f2918a9708c8ccdbfc57f99508299f3",role:"tooltip",class:{visible:this.visible}},e("dialog",{key:"d4942b8d171e7e48defc505179d54ce09288c905",ref:this.dialogRef,id:"tooltip-"+this.instance,class:"dialog",popover:"manual",inert:!this.visible},e("div",{key:"faef3b3e4b5a45ddb3872bd9d8ec1d6eb4a36221",class:"tooltip-container"},e("div",{key:"ce64bda5406c6a70ccddc41f0b4aa4010be1aca9",class:"content-wrapper"},e("div",{key:"52a51ed895ea573d3e889e57a05f65193906492c",class:"tooltip-title"},e("slot",{key:"b7965bd9963fcd789331e4c264e8d317bf7ed314",name:"title-icon",onSlotchange:t=>this.handleTitleIconSlotChange(t)}),e("ix-typography",{key:"b530dbbf13b752968decb45af3953f42e3a0c743",format:"h5"},this.titleContent,e("slot",{key:"c7152f89180904044dc26f996923cc5766ea1d0f",name:"title-content"}))),e("slot",{key:"3b00e9ed924a0c0d8527344c13a3c52a9afd0108"}),e("div",{key:"5401e6015c3a7ebf4749edc466ddca881e4f7d36",class:"arrow"})))))}get hostElement(){return o(this)}};w.style=u;export{w as ix_tooltip};
//# sourceMappingURL=p-dc8de6cb.entry.js.map