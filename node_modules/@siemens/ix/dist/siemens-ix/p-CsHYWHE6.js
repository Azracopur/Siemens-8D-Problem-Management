import{T as t}from"./p-BdCnOrqW.js";const e="data-ix-theme";const s="data-ix-color-schema";class i{get themeChanged(){return this._themeChanged}get schemaChanged(){return this._schemaChanged}hasVariantSuffix(t){return t.endsWith(this.suffixDark)||t.endsWith(this.suffixLight)}isThemeClass(t){return t.startsWith(this.prefixTheme)&&this.hasVariantSuffix(t)}setTheme(t,s=false){if(this.isThemeClass(t)){this.replaceThemeClass(t)}else{document.documentElement.setAttribute(e,t)}if(s){const t=n();this.setVariant(t)}}replaceThemeClass(t){const e=[];Array.from(document.documentElement.classList).filter((t=>t&&this.isThemeClass(t))).forEach((t=>{e.push(t)}));document.documentElement.classList.remove(...e);document.documentElement.classList.add(t)}toggleMode(){if(document.documentElement.hasAttribute(s)){const t=this.getDataColorSchema(document.documentElement);document.documentElement.setAttribute(s,t==="dark"?"light":"dark");return}const t=[];Array.from(document.documentElement.classList).filter((t=>t&&this.isThemeClass(t))).forEach((e=>{t.push(e)}));if(t.length===0){document.documentElement.classList.add(this.getOppositeMode(this.defaultTheme));return}t.forEach((t=>{document.documentElement.classList.replace(t,this.getOppositeMode(t))}))}getDataColorSchema(t){return t.getAttribute(s)}getCurrentTheme(){var t;return(t=Array.from(document.documentElement.classList).find((t=>this.isThemeClass(t))))!==null&&t!==void 0?t:`theme-${document.documentElement.getAttribute(e)||"classic"}-${document.documentElement.getAttribute(s)||n()}`}setVariant(t=n()){if(this.getDataColorSchema(document.documentElement)){document.documentElement.setAttribute(s,t);return}const e=this.getCurrentTheme();document.documentElement.classList.remove(e);if(e.endsWith(this.suffixDark)){document.documentElement.classList.add(e.replace(/-dark$/g,`-${t}`))}if(e.endsWith(this.suffixLight)){document.documentElement.classList.add(e.replace(/-light$/g,`-${t}`))}document.documentElement.setAttribute(s,t)}getOppositeMode(t){if(t.endsWith(this.suffixDark)){return t.replace(/-dark$/g,this.suffixLight)}if(t.endsWith(this.suffixLight)){return t.replace(/-light$/g,this.suffixDark)}return""}splitMutations(t){const i=t.filter((t=>t.attributeName==="class"));const n=t.filter((t=>t.attributeName===e||t.attributeName===s));return{classMutations:i,dataMutations:n}}handleClassMutations(t){return t.forEach((t=>{const{target:e}=t;e.classList.forEach((e=>{var s;if(this.isThemeClass(e)&&!((s=t.oldValue)===null||s===void 0?void 0:s.includes(e))){this._themeChanged.emit(e)}}))}))}handleDataMutations(t){return t.forEach((t=>{const{target:i}=t;const n=i.attributes.getNamedItem(e);if((n===null||n===void 0?void 0:n.value)&&t.oldValue!==n.value){this._themeChanged.emit(n.value)}const r=i.attributes.getNamedItem(s);if((r===null||r===void 0?void 0:r.value)&&t.oldValue!==r.value){this._schemaChanged.emit(r.value)}}))}registerMutationObservers(){if(typeof window==="undefined"){return}if(!("MutationObserver"in window)){console.warn("ThemeSwitcher not supported by your browser. Missing MutationObserver API");return}const t={attributeFilter:["class",e,s],attributeOldValue:true};const i=t=>{const{classMutations:e,dataMutations:s}=this.splitMutations(t);this.handleClassMutations(e);this.handleDataMutations(s)};this.mutationObserver=new MutationObserver(i);this.mutationObserver.observe(document.documentElement,t)}constructor(){this.prefixTheme="theme-";this.suffixLight="-light";this.suffixDark="-dark";this.defaultTheme="theme-classic-dark";this._themeChanged=new t;this._schemaChanged=new t;this.registerMutationObservers()}}const n=()=>{const t=window.matchMedia("(prefers-color-scheme: dark)");if(t.matches){return"dark"}return"light"};const r=new i;export{n as g,r as t};
//# sourceMappingURL=p-CsHYWHE6.js.map