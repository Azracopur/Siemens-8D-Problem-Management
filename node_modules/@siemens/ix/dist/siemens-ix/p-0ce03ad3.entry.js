import{r as e,c as t,h as i,H as s,g as o}from"./p-CtoreFVF.js";import{a as r}from"./p-DhE1t8Qh.js";import{c as a}from"./p-BhgW5qDm.js";import{c as n}from"./p-CX81WQtk.js";import{g as h}from"./p-8HpPmDK_.js";import"./p-BdCnOrqW.js";function c(e,t,{debounceTimeEnter:i,debounceTimeLeave:s}={debounceTimeEnter:0,debounceTimeLeave:500}){let o;let r;return{onEnter:()=>{clearTimeout(r);o=setTimeout((()=>{e()}),i)},onLeave:()=>{clearTimeout(o);r=setTimeout((()=>{t()}),s)}}}const d=":host{display:flex;flex-direction:column;position:relative}:host *,:host *::after,:host *::before{box-sizing:border-box}:host ::-webkit-scrollbar-button{display:none}@-moz-document url-prefix(){:host *{scrollbar-color:var(--theme-scrollbar-thumb--background) var(--theme-scrollbar-track--background);scrollbar-width:thin}}:host{}:host ::-webkit-scrollbar{width:0.5rem;height:0.5rem}:host{}:host ::-webkit-scrollbar-track{border-radius:5px;background:var(--theme-scrollbar-track--background)}:host ::-webkit-scrollbar-track:hover{background:var(--theme-scrollbar-track--background--hover)}:host{}:host ::-webkit-scrollbar-thumb{border-radius:5px;background:var(--theme-scrollbar-thumb--background)}:host{}:host ::-webkit-scrollbar-thumb:hover{background:var(--theme-scrollbar-thumb--background--hover)}:host ::-webkit-scrollbar-corner{display:none}:host .category{display:flex;position:relative;align-items:center;width:100%;height:100%}:host .category-text{width:100%;padding-right:0.25rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}:host .category-chevron{margin-left:auto;margin-right:0;transition:var(--theme-default-time) transform ease-in-out}:host .category-chevron--open{transform:rotate(-180deg)}:host .menu-items{overflow:hidden;max-height:0;transition:var(--theme-default-time) max-height ease-in-out}:host .menu-items--expanded{max-height:999999999px;padding:0.25rem 0 0.25rem 1.625rem}:host .menu-items--collapsed{display:none}:host .category-dropdown ::slotted(ix-menu-item){--ix-menu-item-height:2.5rem}:host .category-dropdown-header{pointer-events:none;padding-left:0.125rem;min-width:256px}:host ::slotted(ix-menu-item){--ix-menu-item-height:2.5rem}:host(.expanded){background-color:var(--theme-color-ghost--active)}:host ::slotted(a[href]){text-decoration:none !important}";const l=40;const m=150;const u=class{constructor(i){e(this,i);this.closeOtherCategories=t(this,"closeOtherCategories",7);this.menuExpand=false;this.showItems=false;this.showDropdown=false;this.nestedItems=[];this.enterLeaveDebounce=c((()=>{this.onPointerEnter()}),(()=>{this.onPointerLeave()}))}isNestedItemActive(){return this.getNestedItems().some((e=>e.active))}getNestedItems(){return Array.from(this.hostElement.querySelectorAll(":scope ix-menu-item"))}getNestedItemsHeight(){const e=this.getNestedItems();return e.length*l}onExpandCategory(e){if(e){this.animateFadeIn()}else{this.animateFadeOut()}}animateFadeOut(){const e=25;r(this.menuItemsContainer,{duration:m,easing:"easeInSine",opacity:[1,0],maxHeight:[this.getNestedItemsHeight()+l,0],onComplete:()=>{setTimeout((()=>{this.showItems=false;this.showDropdown=false}),m+e)}})}animateFadeIn(){r(this.menuItemsContainer,{duration:m,easing:"easeInSine",opacity:[0,1],maxHeight:[0,this.getNestedItemsHeight()+l],onBegin:()=>{this.showItems=true;this.showDropdown=false}})}onPointerEnter(){var e;if((e=this.ixMenu)===null||e===void 0?void 0:e.expand){return}this.closeOtherCategories.emit();this.showDropdown=true}onPointerLeave(){this.showDropdown=false}onCategoryClick(e){var t;e.stopPropagation();if((t=this.ixMenu)===null||t===void 0?void 0:t.expand){this.onExpandCategory(!this.showItems);return}}onNestedItemsChanged(e){const t=this.nestedItems.length;this.nestedItems=this.getNestedItems();if(this.showItems&&this.menuItemsContainer&&t!==this.nestedItems.length){this.menuItemsContainer.style.maxHeight=`${this.getNestedItemsHeight()+l}px`}if(!this.menuExpand||this.showItems||!e){return}for(const t of e!==null&&e!==void 0?e:[]){if(t.attributeName==="class"&&t.target instanceof HTMLElement&&t.target.classList.contains("active")){this.showItems=true;this.onExpandCategory(true);return}}}isCategoryItemListVisible(){return this.menuExpand&&(this.showItems||this.isNestedItemActive())}componentWillLoad(){const e=a(this.hostElement);if(!e){throw Error("ix-menu-category can only be used as a child of ix-menu")}this.ixMenu=e;this.menuExpand=this.ixMenu.expand;this.showItems=this.isCategoryItemListVisible()}componentDidLoad(){var e;this.observer=n((e=>this.onNestedItemsChanged(e)));this.observer.observe(this.hostElement,{attributes:true,childList:true,subtree:true});requestAnimationFrame((()=>{this.onNestedItemsChanged()}));(e=this.ixMenu)===null||e===void 0?void 0:e.addEventListener("expandChange",(({detail:e})=>{this.menuExpand=e;if(!e){this.clearMenuItemStyles()}this.showItems=this.isCategoryItemListVisible()}))}clearMenuItemStyles(){var e,t;(e=this.menuItemsContainer)===null||e===void 0?void 0:e.style.removeProperty("max-height");(t=this.menuItemsContainer)===null||t===void 0?void 0:t.style.removeProperty("opacity")}disconnectedCallback(){if(this.observer){this.observer.disconnect()}}render(){return i(s,{key:"13ac63c3321e33e4781ab642577464fde79c6bf2",class:{expanded:this.showItems},onPointerEnter:()=>{this.enterLeaveDebounce.onEnter()},onPointerLeave:e=>{if(e.pointerType==="touch"){return}this.enterLeaveDebounce.onLeave()}},i("ix-menu-item",{key:"25e8a0a50ea1540e346e830045275e6a0c63327d",class:"category-parent",active:this.isNestedItemActive(),notifications:this.notifications,icon:this.icon,onClick:e=>this.onCategoryClick(e),onFocus:()=>this.onPointerEnter(),tooltipText:this.tooltipText,isCategory:true},i("div",{key:"5b0dcefb391bada721218f4d3ba690c1a2de966e",class:"category"},i("div",{key:"f65e560cb7a6ab490220b814f9e66bbfd010bc44",class:"category-text"},this.label),i("ix-icon",{key:"672a4f90f58ad0cdf023d050d4b3f75114a4ee52",name:h,class:{"category-chevron":true,"category-chevron--open":this.showItems}}))),i("div",{key:"d7f0f085f33a09d7c57ca18818a90125b3c2e2bf",ref:e=>this.menuItemsContainer=e,class:{"menu-items":true,"menu-items--expanded":this.showItems,"menu-items--collapsed":!this.showItems}},this.showItems?i("slot",null):null),i("ix-dropdown",{key:"e5b6be4ba14c97ef2e85abd01833bed929b1efa4",closeBehavior:"both",show:this.showDropdown,onShowChanged:({detail:e})=>{this.showDropdown=e},class:"category-dropdown",anchor:this.hostElement,placement:"right-start",offset:{mainAxis:3},onClick:e=>{if(e.target instanceof HTMLElement){if(e.target.tagName==="IX-MENU-ITEM"){this.showDropdown=false}else{e.preventDefault()}}}},i("ix-dropdown-item",{key:"90e095e2d61e5d359c29c742e4e84457ef47426f",class:"category-dropdown-header"},i("ix-typography",{key:"67efee1940b51e0457ccec7f0a271684ea6df881",format:"label",bold:true,textColor:"std"},this.label)),i("ix-divider",{key:"2ec48cbab9dc6a223fcc636e59b497b1db315369"}),i("slot",{key:"e32fb89cf4045faae851af8d1ed1c4ab394e1709"})))}get hostElement(){return o(this)}};u.style=d;export{u as ix_menu_category};
//# sourceMappingURL=p-0ce03ad3.entry.js.map