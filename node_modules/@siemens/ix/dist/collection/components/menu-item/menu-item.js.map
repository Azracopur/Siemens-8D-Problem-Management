{"version":3,"file":"menu-item.js","sourceRoot":"","sources":["../../../src/components/menu-item/menu-item.tsx"],"names":[],"mappings":"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","sourcesContent":["/*\n * SPDX-FileCopyrightText: 2023 Siemens AG\n *\n * SPDX-License-Identifier: MIT\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { Component, Element, h, Host, Prop, State, Watch } from '@stencil/core';\nimport { createMutationObserver } from '../utils/mutation-observer';\nimport { makeRef } from '../utils/make-ref';\nimport { menuController } from '../utils/menu-service/menu-service';\nimport { Disposable } from '../utils/typed-event';\nimport { iconDocument } from '@siemens/ix-icons/icons';\nimport { a11yBoolean } from '../utils/a11y';\nimport { createSequentialId } from '../utils/uuid';\nimport { IxMenuItemBase } from './menu-item.interface';\nimport { AnchorTarget } from '../button/button.interface';\n\nlet sequenceId = 0;\n\n/**\n * @slot menu-item-label Custom label\n */\n@Component({\n  tag: 'ix-menu-item',\n  styleUrl: 'menu-item.scss',\n  shadow: true,\n})\nexport class MenuItem implements IxMenuItemBase {\n  /**\n   * Label of the menu item. Will also be used as tooltip text\n   */\n  @Prop() label?: string;\n\n  /**\n   * Move the Tab to a top position.\n   */\n  @Prop() home = false;\n\n  /**\n   * Caution: this is no longer working. Please use slot=\"bottom\" instead.\n   *\n   * Place tab on bottom\n   */\n  @Prop() bottom = false;\n\n  /**\n   * Name of the icon you want to display. Icon names can be resolved from the documentation {@link https://ix.siemens.io/docs/icon-library/icons}\n   */\n  @Prop({ mutable: true }) icon?: string;\n\n  /**\n   * Show notification count on tab\n   */\n  @Prop() notifications?: number;\n\n  /**\n   * State to display active\n   */\n  @Prop() active: boolean = false;\n\n  /**\n   * Disable tab and remove event handlers\n   */\n  @Prop() disabled: boolean = false;\n\n  /**\n   * Will be shown as tooltip text, if not provided menu text content will be used.\n   *\n   * @since 4.0.0\n   */\n  @Prop() tooltipText?: string;\n\n  /**\n   * URL for the button link. When provided, the button will render as an anchor tag.\n   *\n   * @since 4.0.0\n   */\n  @Prop() href?: string;\n\n  /**\n   * Specifies where to open the linked document when href is provided.\n   *\n   * @since 4.0.0\n   */\n  @Prop() target?: AnchorTarget = '_self';\n\n  /**\n   * Specifies the relationship between the current document and the linked document when href is provided.\n   *\n   * @since 4.0.0\n   */\n  @Prop() rel?: string;\n\n  /** @internal */\n  @Prop() isCategory: boolean = false;\n\n  @Element() hostElement!: HTMLIxMenuItemElement;\n\n  @State() tooltip?: string;\n  @State() ariaHiddenTooltip = false;\n  @State() menuExpanded: boolean = false;\n\n  private readonly internalItemId = createSequentialId(\n    'ix-menu-item-',\n    sequenceId++\n  );\n\n  private readonly buttonRef = makeRef<HTMLButtonElement | HTMLAnchorElement>();\n  private isHostedInsideCategory = false;\n  private menuExpandedDisposer?: Disposable;\n\n  private readonly observer: MutationObserver = createMutationObserver(() => {\n    this.setTooltip();\n  });\n\n  componentWillLoad() {\n    this.isHostedInsideCategory =\n      !!this.hostElement.closest('ix-menu-category');\n\n    this.onIconChange();\n\n    this.menuExpanded = menuController.nativeElement?.expand || false;\n    this.menuExpandedDisposer = menuController.expandChange.on(\n      (expand) => (this.menuExpanded = expand)\n    );\n  }\n\n  componentWillRender() {\n    this.setTooltip();\n  }\n\n  setTooltip() {\n    this.tooltip =\n      this.tooltipText ??\n      this.label ??\n      this.hostElement.textContent ??\n      undefined;\n\n    this.ariaHiddenTooltip =\n      this.tooltipText === this.label ||\n      this.tooltipText === this.hostElement.textContent;\n  }\n\n  connectedCallback() {\n    this.observer.observe(this.hostElement, {\n      subtree: true,\n      childList: true,\n      characterData: true,\n    });\n  }\n\n  disconnectedCallback() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n\n    if (this.menuExpandedDisposer) {\n      this.menuExpandedDisposer.dispose();\n    }\n  }\n\n  @Watch('icon')\n  onIconChange() {\n    if (!this.isHostedInsideCategory && !this.hostElement.icon) {\n      this.icon = iconDocument;\n    }\n  }\n\n  render() {\n    let extendedAttributes = {};\n    if (this.home) {\n      extendedAttributes = {\n        slot: 'home',\n      };\n    }\n\n    if (this.bottom) {\n      extendedAttributes = {\n        slot: 'bottom',\n      };\n    }\n\n    const commonAttributes = {\n      class: 'tab',\n      tabIndex: this.disabled ? -1 : 0,\n    };\n\n    const menuContent = [\n      this.icon && <ix-icon class={'tab-icon'} name={this.icon}></ix-icon>,\n      this.notifications ? (\n        <div class=\"notification\">\n          <div class=\"pill\">{this.notifications}</div>\n        </div>\n      ) : null,\n      <span id={this.internalItemId} class=\"tab-text text-default\">\n        {this.label}\n        <slot></slot>\n      </span>,\n    ];\n\n    return (\n      <Host\n        class={{\n          disabled: this.disabled,\n          'home-tab': this.home,\n          'bottom-tab': this.bottom,\n          active: this.active,\n          'tab-nested': this.isHostedInsideCategory,\n        }}\n        {...extendedAttributes}\n      >\n        {this.href ? (\n          <a\n            {...commonAttributes}\n            href={this.disabled ? undefined : this.href}\n            target={this.target}\n            rel={this.rel}\n            role=\"button\"\n            ref={this.buttonRef}\n            onClick={(e: Event) => {\n              if (this.disabled) {\n                e.preventDefault();\n                e.stopPropagation();\n              }\n            }}\n          >\n            {menuContent}\n          </a>\n        ) : (\n          <button {...commonAttributes} ref={this.buttonRef}>\n            {menuContent}\n          </button>\n        )}\n        <ix-tooltip\n          for={this.buttonRef.waitForCurrent()}\n          placement={'right'}\n          showDelay={1000}\n          interactive={false}\n          aria-hidden={a11yBoolean(this.ariaHiddenTooltip)}\n          aria-labelledby={this.internalItemId}\n        >\n          {this.tooltip}\n        </ix-tooltip>\n      </Host>\n    );\n  }\n}\n"]}